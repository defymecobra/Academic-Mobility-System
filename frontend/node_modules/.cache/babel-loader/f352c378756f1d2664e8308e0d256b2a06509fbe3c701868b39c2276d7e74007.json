{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Nikita\\\\Desktop\\\\AcademicMobilitySystem\\\\frontend\\\\src\\\\Context\\\\SystemContext.jsx\",\n  _s = $RefreshSig$();\nimport React, { createContext, useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const SystemContext = /*#__PURE__*/createContext(null);\nconst SystemContextProvider = props => {\n  _s();\n  const [all_program, setAll_Program] = useState([]);\n  const [profileData, setProfileData] = useState({\n    userData: {},\n    applications: []\n  }); // Updated profileData structure\n  const [userEmail, setUserEmail] = useState(\"\");\n  useEffect(() => {\n    fetch('http://localhost:4000/allprograms').then(response => response.json()).then(data => setAll_Program(data)).catch(error => console.error(\"Error fetching programs:\", error));\n    if (localStorage.getItem('auth-token')) {\n      fetch('http://localhost:4000/getprofile', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          // Correct content type\n          'auth-token': `${localStorage.getItem('auth-token')}`,\n          // Fixed template string syntax\n          'Content-Type': 'application/json'\n        }\n      }).then(response => response.json()).then(data => setProfileData(data)) // Expecting { userData, applications }\n      .catch(error => console.error(\"Error fetching profile data:\", error));\n    }\n    const storedEmail = localStorage.getItem('user-email');\n    if (storedEmail) {\n      setUserEmail(storedEmail);\n    }\n  }, []);\n  const getTotalProfilePrograms = () => {\n    let totalPrograms = 0;\n    for (const program in profileData.applications) {\n      if (profileData.applications[program]) {\n        totalPrograms++;\n      }\n    }\n    return totalPrograms;\n  };\n  const updateUserEmail = email => {\n    setUserEmail(email);\n  };\n  const contextValue = {\n    getTotalProfilePrograms,\n    all_program,\n    profileData,\n    updateUserEmail,\n    userEmail\n  };\n  return /*#__PURE__*/_jsxDEV(SystemContext.Provider, {\n    value: contextValue,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n};\n_s(SystemContextProvider, \"dHWRznuQd73GVUubttedg5qa/4I=\");\n_c = SystemContextProvider;\nexport default SystemContextProvider;\nvar _c;\n$RefreshReg$(_c, \"SystemContextProvider\");","map":{"version":3,"names":["React","createContext","useEffect","useState","jsxDEV","_jsxDEV","SystemContext","SystemContextProvider","props","_s","all_program","setAll_Program","profileData","setProfileData","userData","applications","userEmail","setUserEmail","fetch","then","response","json","data","catch","error","console","localStorage","getItem","method","headers","Accept","storedEmail","getTotalProfilePrograms","totalPrograms","program","updateUserEmail","email","contextValue","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Nikita/Desktop/AcademicMobilitySystem/frontend/src/Context/SystemContext.jsx"],"sourcesContent":["import React, {createContext, useEffect, useState} from 'react';\r\n\r\nexport const SystemContext = createContext(null);\r\n\r\nconst SystemContextProvider = (props) => {\r\n    const [all_program, setAll_Program] = useState([]);\r\n    const [profileData, setProfileData] = useState({ userData: {}, applications: [] }); // Updated profileData structure\r\n    const [userEmail, setUserEmail] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        fetch('http://localhost:4000/allprograms')\r\n            .then((response) => response.json())\r\n            .then((data) => setAll_Program(data))\r\n            .catch((error) => console.error(\"Error fetching programs:\", error));\r\n\r\n        if (localStorage.getItem('auth-token')) {\r\n            fetch('http://localhost:4000/getprofile', {\r\n                method: 'POST',\r\n                headers: {\r\n                    Accept: 'application/json', // Correct content type\r\n                    'auth-token': `${localStorage.getItem('auth-token')}`, // Fixed template string syntax\r\n                    'Content-Type': 'application/json',\r\n                },\r\n            })\r\n                .then((response) => response.json())\r\n                .then((data) => setProfileData(data)) // Expecting { userData, applications }\r\n                .catch((error) => console.error(\"Error fetching profile data:\", error));\r\n        }\r\n\r\n        const storedEmail = localStorage.getItem('user-email');\r\n        if (storedEmail) {\r\n            setUserEmail(storedEmail);\r\n        }\r\n    }, [])\r\n\r\n    const getTotalProfilePrograms = () => {\r\n        let totalPrograms = 0;\r\n        for (const program in profileData.applications) {\r\n            if (profileData.applications[program]) {\r\n                totalPrograms++;\r\n            }\r\n        }\r\n        return totalPrograms;\r\n    }\r\n\r\n    const updateUserEmail = (email) => {\r\n        setUserEmail(email);\r\n    }\r\n\r\n    const contextValue = {\r\n        getTotalProfilePrograms,\r\n        all_program,\r\n        profileData,\r\n        updateUserEmail,\r\n        userEmail,\r\n    };\r\n\r\n    return (\r\n        <SystemContext.Provider value={contextValue}>\r\n            {props.children}\r\n        </SystemContext.Provider>\r\n    )\r\n}\r\n\r\nexport default SystemContextProvider;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,aAAa,EAAEC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhE,OAAO,MAAMC,aAAa,gBAAGL,aAAa,CAAC,IAAI,CAAC;AAEhD,MAAMM,qBAAqB,GAAIC,KAAK,IAAK;EAAAC,EAAA;EACrC,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACS,WAAW,EAAEC,cAAc,CAAC,GAAGV,QAAQ,CAAC;IAAEW,QAAQ,EAAE,CAAC,CAAC;IAAEC,YAAY,EAAE;EAAG,CAAC,CAAC,CAAC,CAAC;EACpF,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAE9CD,SAAS,CAAC,MAAM;IACZgB,KAAK,CAAC,mCAAmC,CAAC,CACrCC,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACnCF,IAAI,CAAEG,IAAI,IAAKX,cAAc,CAACW,IAAI,CAAC,CAAC,CACpCC,KAAK,CAAEC,KAAK,IAAKC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC,CAAC;IAEvE,IAAIE,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,EAAE;MACpCT,KAAK,CAAC,kCAAkC,EAAE;QACtCU,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACLC,MAAM,EAAE,kBAAkB;UAAE;UAC5B,YAAY,EAAE,GAAGJ,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,EAAE;UAAE;UACvD,cAAc,EAAE;QACpB;MACJ,CAAC,CAAC,CACGR,IAAI,CAAEC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACnCF,IAAI,CAAEG,IAAI,IAAKT,cAAc,CAACS,IAAI,CAAC,CAAC,CAAC;MAAA,CACrCC,KAAK,CAAEC,KAAK,IAAKC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC,CAAC;IAC/E;IAEA,MAAMO,WAAW,GAAGL,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;IACtD,IAAII,WAAW,EAAE;MACbd,YAAY,CAACc,WAAW,CAAC;IAC7B;EACJ,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,uBAAuB,GAAGA,CAAA,KAAM;IAClC,IAAIC,aAAa,GAAG,CAAC;IACrB,KAAK,MAAMC,OAAO,IAAItB,WAAW,CAACG,YAAY,EAAE;MAC5C,IAAIH,WAAW,CAACG,YAAY,CAACmB,OAAO,CAAC,EAAE;QACnCD,aAAa,EAAE;MACnB;IACJ;IACA,OAAOA,aAAa;EACxB,CAAC;EAED,MAAME,eAAe,GAAIC,KAAK,IAAK;IAC/BnB,YAAY,CAACmB,KAAK,CAAC;EACvB,CAAC;EAED,MAAMC,YAAY,GAAG;IACjBL,uBAAuB;IACvBtB,WAAW;IACXE,WAAW;IACXuB,eAAe;IACfnB;EACJ,CAAC;EAED,oBACIX,OAAA,CAACC,aAAa,CAACgC,QAAQ;IAACC,KAAK,EAAEF,YAAa;IAAAG,QAAA,EACvChC,KAAK,CAACgC;EAAQ;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACK,CAAC;AAEjC,CAAC;AAAAnC,EAAA,CA1DKF,qBAAqB;AAAAsC,EAAA,GAArBtC,qBAAqB;AA4D3B,eAAeA,qBAAqB;AAAC,IAAAsC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}